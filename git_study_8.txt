SSHキー設定
複数アカウントの流れ
1.サブ用のメールアドレスで
  GitHubにアカウントを作成する
2.パソコンでサブ用のsshキー作成
3.~/.ssh/config ファイル作成し追記
4.GitHub(サブアカウント)に公開鍵を登録する
5.疎通確認
6.運用時の設定 (gitconfig, cloneなど)

2.パソコンでサブ用のsshキー作成
サブ用のSSHキーを作成
ssh-keygen -t ed25519 -C "メールアドレス" -f "SSHキーの名前指定"
-fでSSHキーの名前指定

3.~/.ssh/config ファイル作成し追記
~/.ssh/config (なければ作成)
Host github.com #メインアカウント
 HostName github.com
 User git
 Port 22
 IdentityFile ~/.ssh/id_ed25519 #メインアカウント用の伴
 TCPKeepAlive yes
 IdentitiesOnly yes

Host github.com.sub #サブアカウント
 HostName github.com
 User git
 Port 22
 IdentityFile ~/.ssh/id_ed25519_sub　 #サブアカウント用の伴
 TCPKeepAlive yes
 IdentitiesOnly yes

公開鍵登録 & 疎通確認
4. GitHubに公開鍵を登録する
Github -> setting -> SSH and GPG keys -> 作成したSSHキーの公開鍵を登録

5. 疎通確認 (configのHostに設定した名前をターミナルで確認)
ssh -T git@github.com
ssh -T git@github.com.sub

6. 運用 gitconfigの設定
普段使う方は global
リポジトリ毎に切り替える場合は local

cd リポジトリ名
git config --local user.name ユーザー名
git config --local user.name メールアドレス

運用でcloneする場合
// configに設定したHostを指定する
git clone git@github.com.sub:username/repositoryname.git
git remote add origin git@github.com.sub:username/repository-name.git

// git のurl確認
git config remote.origin.url 

ユーザーの招待
Github -> Settings -> Collaborators -> Add people 
で招待したい人のアカウント名などを指定すると招待メールが飛びます。

招待された人が受け入れるとprivateリポジトリでも表示されるようになります。

Git Flow
チーム開発におすすめのブランチモデル
main リリース用
develop 開発用
hotfixes バグ修正
release リリース手前のテスト用
feature 新機能

直接pushの禁止
https://gyazo.com/bbd8996635f334a22796e94575801b38
ブランチの保護
Settings -> Branches ->protection rules -> レビューまたはステータスチェックを必須にする

プルリクのテンプレート
第３者が見ると想定して見やすい、レビューしやすい内容にしておきたい 
手順
https://docs.github.com/ja/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository

プルリクのレビュー
画面右のReviewers からレビュー依頼する人を選択
https://gyazo.com/542a80899bf160189cf201b463f86137
①＋ボタンでレビューをする
②Add single comment //1行コメント。相手にメール。
③Start a review //複数コメント記入
->右上のReview Changeクリック
Comment  Approve  Request changes
から1つを選ぶ

permanent(永続)
ブランチの変更に関わらずリンクが残る機能
コード選択 -> ...マークをクリックで選択 -> copy permalink
https://gyazo.com/a3b681122c3e0b75f009a7721e06d96e

Draft Pull Request
PRをDraft(下書き)にすると、作業中というのを明確にできる
(Draftでもレビュアー設定をすると通知が飛ぶので注意)

パブリックで対応・プライベートで非対応
GitHub Free / GitHub Pro
パブリック・プライベート対応
GitHub Team / Enterprise Cloud / Enterprise Server

PR作成時に draftを選べるようになる
準備できたら Ready for reviewをクリックする事でマージ可能になる

Issues(課題、問題)
タスク(やる事)を発行し、commitと紐づけられる機能
機能・改善・バグ修正 etc...
Github -> issues -> New issues -> issuesを書く -> submit new issue

イシューIDが発行されるので、commitのコメント内に #番号 を追記することで簡単に紐づけることができる
結果
https://gyazo.com/bbf5f5560cee5df654e24ca3d1a5d937

Issuesの機能
画面右側から設定可能
Assignees...担当者アサイン
Labels...ラベル(それぞれフィルターもできる)
https://gyazo.com/4f15aaa407c902b78ec5c63c9eb7ac06

Issuesのテンプレート機能
PRのテンプレートのようにIssueでもテンプレートを作成できる
テンプレートの候補を表示したり、markdown形式、フォーム形式なども作成可能

Issueテンプレートを設定する
https://docs.github.com/ja/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository

Milestones(重要な中間目標地点)
期限付きの中間地点
複数のIssueを紐づけることができる
https://gyazo.com/0ae2e7dbfe1faa9613652254ea14db63

紐づくIssueの数・状況に応じて進捗(%表示)、open、closedの数が表示される
https://gyazo.com/cdfe50a6af50dbe9de7cf53a464d45e5

Issue発行時右側メニューからマイルストーンを選ぶ
https://gyazo.com/81e572fed47d7421cbeca7e4bd245aa2

Gitの機能
tagをつけるとtagのついたコミットだけを一覧で表示できる
バージョン毎につけられる事が多い(ver1.0など)

//タグをコミットにつける
git tag -a <タグ名> -m 'コメント' <コミット名>

//コミット指定しないと現在ブランチの最新コミットに付与
git tag -a <タグ名> -m 'コメント'

//タグ一覧表示
git tag

//タグのアップロード
git push origin <タグ名>

//タグ削除
git tag -d <タグ名>

//git clone でタグ指定も可能
git clone -b <タグ名> URL

Github上
https://gyazo.com/ab5a8460fa7c259bf64f945d8d539f6f

Projects
IssueやPRを列・カードに分け進捗管理しやすい仕組み
イメージ図
https://gyazo.com/8f04e8eadd145a0727631fbb8cdd1e5e

Projects (Beta)
スプレッドシート & カンバン方式(リポジトリに紐付けできない)
Projects (classic)
カンバン方式

Projects (classic)の作り方
Templates列の作成
IssueやPRの状況で自動で動かす設定
Github
Project -> New Project(https://gyazo.com/f9b99198e68c84bffe5260b3da7c2b72) -> https://gyazo.com/251a686a6b77f0ac11f5b30651804a3e

自動で移動する設定
列の ••• から Manage automation
-> https://gyazo.com/3489fbc82da338032e849691db55126a

Project templateがAutomated kanban with Reviews
IssueやPR発行時に右側メニューのProjectsも選択すると状況変化時に自動で列を移動する
ToDo...Issue発行時
In Progress...プルリク発行時
Review In Progress...レビュー時
Review Approved...レビュー承認
Done...close後

ノートを作り、ノートをIssueに変換することもできる
https://gyazo.com/aea8b842bd869624ea182be920445558

Projects(Beta)
Projects (classic)との違い
①テーブル表示 (カンバンも可)
②新たな列を自由に追加できる
③検索機能の強化
④フィルター機能の強化
⑤リポジトリではなくアカウントに紐づくプロジェクト(リポジトリを横断した確認もしやすい)

Project -> add Project -> Go to your profile to create a new project -> new Project
https://gyazo.com/8dae721a7a831bddd2c76c19be682cd6

Workflow
画面右上の ••• -> Workflow
条件に応じてカードの移動
https://gyazo.com/d67d6617c0c496faf31492eb7f3f6f0b

列のカスタム
Settings -> Custom Fields
https://gyazo.com/881d6d5b561ba31022f49e9758d6a643

GitHubのPRやIssueで使える絵文字の一覧
https://www.webfx.com/tools/emoji-cheat-sheet/

オートコンプリート機能
https://github.blog/2012-10-12-emoji-autocomplete/

Discussions
使う用途
①新たに参加した人向けに読んで欲しい情報をまとめる
②Announcements: リリースノート (メモ等)
③Ideas: アイデア帳
④Q＆A: 質問箱

Github上 -> Discussions

New category -> Questions & Answer を選択
//結果 回答後にマークをつける事ができる(mark as answer)
https://gyazo.com/504d1613a9e740b8693170d97cebbd53

Wiki
ユーザーが共同してコンテンツを編集する仕組み
Discussionsと違いやりとりは残らない
エンジニア職以外も見やすい 

Github上 -> Wiki -> NewPageで新規作成

GitHub Actions
GitHubが提供するCI/CDのためのワークフローエンジン(テスト、ビルド、デプロイ etc...)
CI/CDとは「Continuous Integration（継続的インテグレーション）/ Continuous Delivery（継続的デリバリー）」の略称。
CIはコードを書いてマージすること。CDは本番環境に移すこと。

GitHubの様々なイベントにフックして自動処理を実行

用途例
・push時に自動テスト実行
・PR作成時にSlackに通知
・PRマージ後にブランチの自動削除
・issue登録時に担当者自動割り当て
・issue登録時に自動でProjectsに追加
・一定期間放置されたissueをcloseする
etc..

GitHub Actionsはワークフローファイルを作ってどのイベントでどんな内容を処理するのかコードを書く
Event: push など
Runner: 実行環境 ubuntu-latest など
Job: 実行したい処理をまとめたもの
Step: 実行したい処理

マニュアル
https://docs.github.com/ja/actions

ワークフローの定義
.github/workflows/hello.yml //設定ファイル

設定ファイルの中身
name: Hello, World # ワークフロー名
on: push # イベント

jobs: # ジョブ
 my_first_job: #ジョブのID
 name: Greeting #ジョブ名
 runs-on: ubuntu-latest #実行される仮想環境
 steps: #ジョブ内で実行される処理
 - run: echo "hello, world"
